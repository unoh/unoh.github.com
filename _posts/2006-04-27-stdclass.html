---
layout: post
title: "stdClassのオブジェクト"
---
こんにちは、modです。<br />
自分は主に映画生活のPHPプログラムをいじっていますが、この間見たことない現象に出会いました。<br />
あるクラスのオブジェクトをnewしてるつもりが、うまく動かず、変数をvar_dumpしてみると<br />
<br />
object(<b>stdClass</b>)<br />
<br />
と表示されてしまう。つまり変数の値がstdClassというクラスのオブジェクトなんですが、こんなものを生成した記憶はありません。しかも何やら1つだけフィールドを備えていたりします。<br />
<br />
コンストラクタでエラーが出たらこうなるのか？と暫く悩んでましたが、コードを眺めているうちに原因に気づきました。僕はオブジェクトでない値の“フィールドにアクセス”していたのです。つまり、<br />
<br />
$foo = "";<br />
$foo->bar = "baz";<br />
<br />
このようなことをしていたと。こうすると、$fooは自動的に、値が"baz"のフィールド$barを持ったstdClassクラスのオブジェクトとなるらしいです。<br />
考えてみればPHPでは、未定義の変数 例えば$hoge に対して<br />
<br />
$hoge[0]="fuga";<br />
<br />
とすると勝手に$hogeが配列として扱われるわけですから、上に書いたような挙動も納得できます。<br />
身に覚えのないオブジェクトができて、「違う、オレはこんなの作ってない！」と戸惑われてる方はどうぞご注意ください＾＾；
