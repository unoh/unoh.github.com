---
layout: post
title: "Dojo 0.4の新機能を使っていろいろ遊んでみました"
---
こんにちは。できないのではなく「つくらない派」のhideです。<br />
<br />
以前、<a href="http://labs.unoh.net/2006/10/dojoioscriptsrcioajax.html">「Dojoで簡単にクロスドメインAjaxを実現」</a>というエントリを書きましたが、その後、新機能が追加された<a href="http://dojotoolkit.org/">Dojo 0.4</a>がリリースされました。0.4になって、JSONPを簡単に扱う方法は、dojo.io.bind() を dojo.io.ScriptSrcTransport.bind() を使うように変更しないと動作しなくなったので注意してください。<br />
<br />
追加された機能は次の通りです。<br />
<br />
・グラフ描画機能の追加<br />
・各種ウィジェットの追加<br />
・SVG/VMLのベクター描画ライブラリ(GFX)の追加<br />
・FireBugと連携したデバック機能の改善<br />
・名前空間のサポート<br />
・i18nサポート<br />
<br />
そして、Dojo 0.4を使っていろいろ遊んでみたサンプルがこれです。HTMLとJavaScriptのコードを書いただけで、サーバサイドのプログラムは1行も書いていません。グラフの描画もDojoのChartingライブラリを使って行っています。<br />
<br />
<center><a href="http://labs.unoh.net/html/dojo04/" target="_blank"><img alt="dojo04s.png" src="http://labs.unoh.net/dojo04s.png" width="323" height="260" /><br /><br />Dojoで遊んでみたサンプル</a></center><br />
<br />
<br />
上部のDockみたいな部分を簡単に説明すると、次のような感じです。FisheyeList widgetというのがこれで、基本的にdivタグの属性としてプロパティを書いておくだけです。FisheyeListItemがアイコン一つ一つに対応して、iconsrcで画像ファイル名、onClickでクリックした際の動作を指定します。<br />
<br />
<pre class="source_code">
&lt;div dojoType="FisheyeList"
    	itemWidth="50" itemHeight="50"
    	itemMaxWidth="100" itemMaxHeight="100"
    	orientation="horizontal"
    	effectUnits="2"
    	itemPadding="10"
    	attachEdge="top"
    	labelEdge="bottom"
    	enableCrappySvgSupport="false"&gt;
        
    	&lt;div dojoType="FisheyeListItem" onClick="load_app('mypane1');"
             iconsrc="images/icon_comment.png"&gt;
    	&lt;/div&gt;
    	&lt;div dojoType="FisheyeListItem" onClick="load_app('mypane2');"
             iconsrc="images/icon_calendar.png"&gt;
    	&lt;/div&gt;
    	&lt;div dojoType="FisheyeListItem" onClick="load_app('mypane3');"
             iconsrc="images/icon_graph.png"&gt;
    	&lt;/div&gt;
    	&lt;div dojoType="FisheyeListItem" onClick="alert('Monkey!');"
             iconsrc="images/icon_monkey.png"&gt;
    	&lt;/div&gt;
    	&lt;div dojoType="FisheyeListItem" onClick="load_app('mypane4');"
             iconsrc="images/icon_info.png"&gt;
    	&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre><br />
<br />
<br />
少々動作が重いのが難点ですが、これだけ簡単にこのレベルのアプリケーションが書けると夢が広がります。次の開発合宿では、あんなのやこんなのを作ってみたいですね。
