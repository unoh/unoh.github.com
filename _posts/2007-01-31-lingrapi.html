---
layout: post
permalink: /2007/01/31/lingrapi.html
title: "Lingrとフォト蔵のAPIを使ってチャットと画像でもにゃもにゃ"
date: 2007-01-31T10:24:24.00+09:00
tags:
  - "Keita"
---
Keitaです。<br />
<br />
<a href="http://wiki.lingr.com/dev/show/API+Tutorial">Lingr API</a>が公開されました。<br />
<br />
で、すばらしいことに、そのAPIをPHPから簡単に取り扱うライブラリを、<a href="http://d.hatena.ne.jp/p4life/20070127/1169915026">p4life氏が公開</a>されているのでそれを便利に使わせていただきました。<br />
<br />
もともと、個人的にLingrに興味をもっていて、上記のライブラリを使ってサイコロをふれるようにしたりして遊んでいたのですが、IRCのボットを超えるようなものが思いつきませんでした。<br />
<br />
いろいろ悩んだあげく、たぶん、Javascript周辺に新しい何かがあると思うのですが、とりあえず、一晩、PHPで遊んでみました。<br />
<br />
<h2>試作その1</h2><br />
<a href="http://diary.sa-ga.jp/lingr/Ethna_Plugin_Logwriter_Lingr.phps">EthnaのログをLingrにはきだしてみた</a><br />
<br />
やってみる前から気がついていたのですが、いろいろな意味でだめです。<br />
そもそも、機密情報が入る可能性がる、ログを他のサーバに送り出してる時点でもうだめです。<br />
あと、ログが大量になるとえらいことになります。<br />
すいません。<br />
<br />
そういうわけで話は前後しますが、社内の人とお昼いったときになんかアイディアない？<br />
って聞いたところ、フォト蔵との連携がでてきました。<br />
<br />
<h2>試作その2</h2><br />
こっちが本題です。<br />
フォト蔵との連携って何よっていうと、Lingrは画像のURLを書き込むと、画像を表示してくれるという仕様があります。<br />
また<a href="http://photozou.jp/basic/api">フォト蔵はAPIが公開</a>されており、その中に、serach_publicという画像を検索できる（しかもクリエイティブコモンズについても選べる）APIがあり、これを組みあわせることにより、<br />
「特定のキーワードに反応して適当に画像を表示する」<br />
というライブラリができます。（ってこれテスト番長が考えてたしくみじゃん）<br />
<br />
フォト蔵との連携は、<a href="http://labs.cybozu.co.jp/blog/tsuruoka/anubis/blog_show/30">サイボウズラボの鶴岡さんが公開されているフォト蔵APＩライブラリを利用させていだきました。</a><br />
<br />
<a href="/files/lingr_pub.tar.gz">Lingrとフォト蔵を組み合わせてみた</a><br />
これを組み合わせると<br />
photozou>>ねこ<br />
とか<br />
フォト蔵>>猫<br />
とかやると、フォト蔵の画像が表示されます。<br />
<br />
これで、議論が白熱したときに。<br />
「まぁまぁ、まったりまったり。フォト蔵>>猫」<br />
で、和みます。ちなみに僕は犬好きです。<br />
<br />
<a href="http://photozou.jp/photo/show/784/2284976"><img src="http://photozou.jp/pub/784/784/photo/2284976.jpg" alt="すくりーんしょっと" width="300" height="268" style="border: solid 1px #000;"></a><br><a href="http://photozou.jp/photo/show/784/2284976">すくりーんしょっと</a> posted by <a href="http://photozou.jp/mypage/top/784">(C)フォト蔵</a><br />
<br />
ちなみに、ソースみてみたらわかりますが、わりと適当です。<br />
エラー処理もそこそこです。<br />
いたづらされると、（実行している）サーバのリソース食い尽くしそうです。<br />
テスト用途以外で使うには、十分リスクを計算した上でつかってください。<br />
<br />
つくっていて感じたのは、（前準備はありましたが）実装は一晩でできてしまうことです。<br />
<a href="http://wiki.lingr.com/dev/show/API+Tutorial">Lingr API</a>や、<a href="http://photozou.jp/basic/api">フォト蔵API</a>さらには、<a href="http://d.hatena.ne.jp/p4life/20070127/1169915026">PEAR::Services_Lingr</a>, <a href="http://labs.cybozu.co.jp/blog/tsuruoka/anubis/blog_show/30">Services_Photozou</a>。<br />
これらを組み合わせて、あとちょっと何かするだけで、さっくり作れるのは、やっぱ楽しい時代がきたなーと実感します。<br />
(buzzwordだから使いたくないけど)Web2.0は、「ジョバンニが一晩でやってくれました」な世界なのかもしれません。
