---
layout: post
title: "0 == 'hoge' は true"
---
こんにちは，ttsuruoka です．<br />
結構有名な話なのですが，知らない人が居たのでここで紹介しておきます．<br />
<br />
PHP で文字列を比較するときに，<br />
<br />
 if ($s == 'mypassword')<br />
<br />
のように == 演算子を使うと，<br />
とても簡単に文字列の比較ができて便利なのですが，<br />
$s が整数の 0（あるいは浮動小数点数の 0.0 など）のときに真（true）になってしまいます．<br />
これは，数値と文字列の比較が行われたときに<br />
文字列（'mypassword'）が自動的に数値に型変換されて，<br />
0 として扱われるためです．<br />
<br />
また，どんな文字列でも数値に型変換されると 0 になるか，<br />
というとそうではなくて，例えば，<br />
<br />
 if ($s == '100yen')<br />
<br />
は $s が '100yen' あるいは 100 のときに真になります．<br />
これは $s が 0 でも真になりません．<br />
<br />
あと，上の 'mypassword' のように == 演算子を使って<br />
HTML フォームから受け取ったパスワードなどをチェックしているプログラムは<br />
一見脆弱なように見えますが，<br />
HTML フォームから送られたデータは文字列として扱われるので<br />
フォームから数値の 0 を送ろうとしても，<br />
<br />
 if ('0' == 'mypassword')<br />
<br />
のように文字列同士の比較となり，これは真にはならず命拾いします．<br />
<br />
数値に変換されると困るとき，厳密に文字列を比較したいときは，<br />
PHP4 から導入されている === 演算子や strcmp() 関数などを使えば OK です．
